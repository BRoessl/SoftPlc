language: csharp
sudo: required
dotnet: 2.0.0
os:  
  - linux
branches:  
  only:
    - master
services:
  - docker
before_install:
  - cd SoftPlc
script:
  - dotnet publish -c release -o release
#  - cd release
#  - dotnet SoftPlc.dll
  - docker build -f ./Docker/linux-x64/Dockerfile -t fbarresi/softplc:1.0beta$TRAVIS_BUILD_NUMBER-linux ./release/
  - docker run --name softplc fbarresi/softplc:1.0beta$TRAVIS_BUILD_NUMBER-linux
after_success:
  - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
  - docker push fbarresi/softplc:1.0beta$TRAVIS_BUILD_NUMBER-linux;
